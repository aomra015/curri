<nav class="navbar" role="navigation">
  <div class="container">
    <div id="logo"><a href="/"><%= image_tag("logo2.svg") %></a></div>
    <ul class="nav">
      <li><%= link_to 'Classrooms', classrooms_path %></li>

      <% if @classroom && @classroom.id %>
        <% if current_user.teacher? %>
          <li><%= link_to "Requesters (#{@classroom.requesters_count})", classroom_requesters_path(@classroom) %></li>
        <% end %>
        <li><%= link_to 'Tracks', classroom_tracks_path(@classroom) %></li>
      <% end %>

      <% if @track && @track.id && current_user.teacher? %>
        <li><%= link_to 'Analytics', classroom_track_analytics_path(@classroom, @track) %></li>
      <% end %>

      <% unless current_user %>
        <li><%= link_to 'Login', login_path %></li>
        <li><%= link_to 'Register', register_path %></li>
      <% end %>

      <% if current_user %>
        <% if current_page?('/profile/edit') %>
          <li><%= link_to 'Classrooms', classrooms_path %></li>
        <% else %>
         <li><%= link_to 'Profile', edit_profile_path %></li>
        <% end %>
        <li class="hide-role"><span> <%= "Role: #{current_user.classrole_type}; #{current_user.email}" %> </span></li>

      <% if current_user.student? %>
        <% if current_user.needs_help?(@classroom) %>
          <li><%= link_to "I need help!", update_status_path(classroom_id: @classroom.id), method: :patch %></li>
        <% else %>
          <li><%= link_to "I'm OK", update_status_path(classroom_id: @classroom.id), method: :patch %></li>
        <% end %>
      <% end %>

        <li><%= link_to 'Logout', logout_path, method: :delete %></li>
      <% end %>

    </ul>
  </div>
</nav>