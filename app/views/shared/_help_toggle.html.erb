<% if current_user.teacher? %>
  <%= link_to classroom_requesters_path(@classroom), id: "requesters_link", class: 'help-toggle' do %>
    <% requests = @classroom.requesters.size %>
    <% requests_limit = 30 %>
    <% if requests > 0 %>
      <span class="nav-icon nav-help active" title="Your Students Need Help" data-reqlimit="<%= requests_limit %>"></span>
      <div class="req-num">
        <% if requests <= requests_limit %>
          <%= requests %>
        <% else %>
          <%= "#{requests_limit}+" %>
        <% end %>
      </div>
    <% else %>
      <span class="nav-icon nav-help" title="No Students Need Help"></span>
    <% end %>
  <% end %>
<% else %>
  <% requester = current_user.classrole.invitations.find_by(classroom_id: @classroom.id) %>
  <div class="help-toggle">
    <% if current_user.needs_help?(@classroom) %>
      <%= link_to "In Help Queue", classroom_requester_path(classroom_id: @classroom.id, id: requester.id), method: :patch, class: 'help-btn in-queue' %>
    <% else %>
      <%= link_to "Ask for Help", classroom_requester_path(classroom_id: @classroom.id, id: requester.id), method: :patch, class: 'help-btn ask-help' %>
    <% end %>
  </div>
<% end %>
