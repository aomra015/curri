<div class="grid-unit narrow">
  <div class="padding-border">
    <%= link_to classroom_track_path(classroom_id: @classroom, id: track), class: "content" do %>
      <h4><%=track.name %>
        <% unless track.published %>
          <span class="unpublished-badge h5">Unpublished</span>
        <% end %>
      </h4>

      <div class="checkpoint-count">
        <% if track.published %>
          <span class="tracks-icons checkpoint-icon"></span>
          <span class="number"><%= track.checkpoints.length %></span><span><%= " Checkpoint".pluralize %></span>
        <% else %>
          <span class="tracks-icons checkpoint-icon-unpublished"></span>
          <span class="number unpublished-text"><%= track.checkpoints.length %></span><span class="unpublished-text"><%= " Checkpoint".pluralize %></span>
        <% end %>
      </div>
      <div class="track-time">
        <div class="start-time">
          <% if track.published %>
            <span class="tracks-icons start-icon"></span>
            <span><%= display_start_time(track) %></span>
          <% else %>  
            <span class="tracks-icons start-icon-unpublished"></span>
            <%= display_start_time(track) %>
          <% end %>
        </div>
        <div class="end-time">
          <% if track.published %>
            <span class="tracks-icons stop-icon"></span>
            <span><%= display_end_time(track) %></span>
          <% else %>
            <span class="tracks-icons stop-icon-unpublished"></span>
            <%= display_end_time(track) %>
          <% end %>
        </div>
      </div>

      <div class="track-progress">
        <% if current_user.student? %>
          <%= render partial: 'shared/progress_bar', locals: { ratings: track.student_ratings(current_user.classrole), total_count: track.checkpoints.length } %>
        <% else %>
          <%= render partial: 'shared/progress_bar', locals: { ratings: track.ratings, total_count: @classroom.invitations.accepted.size * track.checkpoints.size } %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
